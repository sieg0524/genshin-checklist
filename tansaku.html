<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>åŸç¥ æ¢ç´¢ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #f0f8ff;
            padding: 20px;
            max-width: 900px;
            margin: auto;
        }

        h1 {
            text-align: center;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }

        th {
            white-space: nowrap;
        }

        th,
        td {
            border: 1px solid #aaa;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #d0e7ff;
        }

        button {
            margin: 2px;
            padding: 5px;
        }

        .progress-bar {
            background: #ddd;
            border-radius: 8px;
            width: 100%;
            height: 12px;
            margin: 4px 0;
            position: relative;
        }

        .progress-inner {
            height: 100%;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <h1>åŸç¥ æ¢ç´¢ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h1>
    <div id="output"></div>

    <button onclick="resetProgress()">ãƒ‡ãƒ¼ã‚¿åˆæœŸåŒ–</button>

    <script>
        const countries = [
            "ãƒ¢ãƒ³ãƒ‰", "ç’ƒæœˆ", "ãƒ‰ãƒ©ã‚´ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ³",
            "ç¨²å¦»1<br><br>ç¥ç„¡å¡š<br>ãƒ¤ã‚·ã‚ªãƒªå³¶", "ç¨²å¦»2<br><br>æµ·ç¥‡å³¶<br>ã‚»ã‚¤ãƒ©ã‚¤å³¶", "é¶´è¦‹", "æ·µä¸‹å®®", "å±¤å²©å·¨æ·µ",
            "ã‚¹ãƒ¡ãƒ¼ãƒ«é›¨æ—", "ã‚¹ãƒ¡ãƒ¼ãƒ«ç ‚æ¼ 1<br><br>åˆ—æŸ±ç ‚åŸ<br>ä¸Šé¢¨è•åœ°<br>ä¸‹é¢¨è•åœ°", "ã‚¹ãƒ¡ãƒ¼ãƒ«ç ‚æ¼ 2<br><br>åƒå°‹ã®ç ‚æ¼ ", "ã‚¹ãƒ¡ãƒ¼ãƒ«ç ‚æ¼ 3<br><br>è’çŸ³ã®è’¼æ¼ <br>ãƒ•ã‚¡ãƒ©ã‚¯ã‚±ãƒ«ãƒˆã®åœ’",
            "ãƒ•ã‚©ãƒ³ãƒ†ãƒ¼ãƒŒ1<br><br>ãƒ•ã‚©ãƒ³ãƒ†ãƒ¼ãƒŒåœ°åŒº<br>ãƒ–ãƒ­ãƒ¼åœ°åŒº<br>ãƒ™ãƒªãƒ«åœ°åŒº", "ãƒ•ã‚©ãƒ³ãƒ†ãƒ¼ãƒŒ2<br><br>ãƒªãƒ•ã‚£ãƒ¼åœ°åŒº<br>ç§‘å­¦ç ”ç©¶é™¢åœ°åŒº",
            "ãƒ•ã‚©ãƒ³ãƒ†ãƒ¼ãƒŒ3<br><br>ãƒ¢ãƒ«ãƒ†åœ°åŒº<br>ã‚¨ãƒªãƒ‹ãƒ¥ã‚¹å±±æ—åœ°åŒº", "ãƒ•ã‚©ãƒ³ãƒ†ãƒ¼ãƒŒ4<br><br>ãƒã‚¹ãƒˆã‚¤åœ°åŒº<br>å¾€æ—¥ã®æµ·",
            "æ²ˆç‰ã®è°·", "ãƒŠã‚¿1<br><br>ä¸‡ç«ã®ã»ã¨ã<br>ãƒ†ã‚±ãƒ¡ã‚«ãƒ³ã®è°·<br>ã‚³ã‚¢ãƒ†ãƒšãƒƒã‚¯å±±<br>ãƒˆãƒ¤ãƒƒã‚¯æºæ³‰åœ°",
            "ãƒŠã‚¿2<br><br>ãƒ†ã‚¹ã‚«ãƒ†ãƒšãƒˆãƒ³å±±è„ˆ<br>ã‚¯ã‚¡ãƒ¯ã‚«ãƒ³æ–­å´–<br>ã‚ªã‚·ã‚«ãƒ»ãƒŠã‚¿", "ãƒŠã‚¿3<br><br>å¤ã®è–å±±<br>ã‚¢ãƒˆã‚¯ãƒ‘ãƒ³ã®å¤§åœ°"
        ];

        const elements = ["ä»™éœŠ", "å®ç®±", "æ™‚é–“æŒ‘æˆ¦", "é›·éœŠ"];

        const initData = [
            [[51, "ã‚†ã‚‰ã‚†ã‚‰ã—ãŸå°ã"], [518, "é¢¨è¿½ã„ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [17, "é¢¨è¿½ã„å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[81, "å²©é–“ã®å°ã"], [1132, "ç£å²©ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [47, "ç£å²©ã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[32, "é›ªè¸ã¿ã®å°ã"], [234, "é›ªå±±ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [0, "ï¼ˆæœªè¨­å®šï¼‰"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[21, "ç¨²å…‰ã®å°ããƒ»1"], [358, "å¾ªé›·ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»1"], [36, "å¥”é›·ã®å†’é™ºè€…ãƒ»1"], [43, "é³´è‰ã®æ•æ‰‹ãƒ»1"]],
            [[6, "ç¨²å…‰ã®å°ããƒ»1"], [204, "å¾ªé›·ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»2"], [29, "å¥”é›·ã®å†’é™ºè€…ãƒ»2"], [19, "é³´è‰ã®æ•æ‰‹ãƒ»2"]],
            [[6, "æ·±éœ§ã®å°ã"], [169, "è¿·å­ã«ãªã£ãŸãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [16, "è¿·å­ã«ãªã£ãŸå†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[36, "ãƒ•ã‚©ã‚¹ãƒ•ã‚©ãƒ­ã‚¹ã®å°ã"], [185, "ã¸ã‚¹ãºãƒ­ã‚¹ã®ãŠå®"], [18, "ã‚«ã‚¤ãƒ­ã‚¹ã®æ™‚åˆ»"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[37, "å²©æ·µã®å°ã"], [248, "å²©æ·µã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [20, "å²©æ·µã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[54, "æ£®æ—ã®å°ã"], [575, "ç‘¶æ—ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [45, "ç‘¶æ—ã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[52, "å¤§æ¼ ã®å°ããƒ»1"], [354, "æµç ‚ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»1"], [52, "æµç ‚ã®å†’é™ºè€…ãƒ»1"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[27, "å¤§æ¼ ã®å°ããƒ»2"], [290, "æµç ‚ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»2"], [37, "æµç ‚ã®å†’é™ºè€…ãƒ»2"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[21, "ç ‚ç£§ã®å°ã"], [256, "è’ã‚Œåœ°ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [26, "è’ã‚Œåœ°ã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[42, "æ½®æµ·ã®å°ããƒ»1"], [344, "è’¼æ³¢ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»1"], [53, "è’¼æ³¢ã®å†’é™ºè€…ãƒ»1"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[13, "æ½®æµ·ã®å°ããƒ»2"], [243, "è’¼æ³¢ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»2"], [28, "è’¼æ³¢ã®å†’é™ºè€…ãƒ»2"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[13, "æ½®æµ·ã®å°ããƒ»3"], [207, "è’¼æ³¢ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»3"], [30, "è’¼æ³¢ã®å†’é™ºè€…ãƒ»3"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[6, "é‡‘å®®ã®å°ã"], [151, "å¤æµ·ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [33, "å¤æµ·ã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[20, "ç‘¶åº­æ¡ˆå†…äºº"], [333, "ç¿ é™µã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [63, "ç¿ é™µã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[40, "å¹»å†™ã®å°ããƒ»1"], [411, "ç‡¼ç‚ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»1"], [17, "ç‡¼ç‚ã®å†’é™ºè€…ãƒ»1"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[12, "å¹»å†™ã®å°ããƒ»2"], [202, "ç‡¼ç‚ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼ãƒ»2"], [11, "ç‡¼ç‚ã®å†’é™ºè€…ãƒ»2"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]],
            [[14, "è«¸å›ã‚‰ã®ä¹¾æ¯ã‚’å–œã‚“ã§å—ã‘ã‚ˆã†"], [217, "æ²ƒç°ã®ãƒˆãƒ¬ã‚¸ãƒ£ãƒ¼ãƒãƒ³ã‚¿ãƒ¼"], [14, "æ²ƒç°ã®å†’é™ºè€…"], [0, "ï¼ˆæœªè¨­å®šï¼‰"]]
        ];

        const theoretical = initData.map(row => row.map(e => e[0]));
        const achievementTable = initData.map(row => row.map(e => e[1]));

        let progress = JSON.parse(localStorage.getItem("genshinProgress")) || [];
        correctProgressStructure();

        function correctProgressStructure() {
            for (let i = 0; i < countries.length; i++) {
                if (!Array.isArray(progress[i])) progress[i] = [];
                for (let j = 0; j < elements.length; j++) {
                    if (typeof progress[i][j] !== "number") progress[i][j] = 0;
                }
            }
        }

        function saveProgress() {
            localStorage.setItem("genshinProgress", JSON.stringify(progress));
        }

        function resetProgress() {
            if (confirm("æœ¬å½“ã«å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸåŒ–ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚")) {
                localStorage.removeItem("genshinProgress");
                location.reload();
            }
        }

        function showList() {
            let html = `<table><tr><th>å›½ / è¦ç´ </th>`;
            elements.forEach(e => html += `<th>${e}</th>`);
            html += `</tr>`;

            for (let i = 0; i < countries.length; i++) {
                html += `<tr><th>${countries[i]}</th>`;
                for (let j = 0; j < elements.length; j++) {
                    const curr = progress[i][j];
                    const max = theoretical[i][j];
                    const percent = max > 0 ? Math.round((curr / max) * 100) : 0;
                    const achv = achievementTable[i][j];
                    const barColor = (percent === 100) ? "#4caf50" : "#2196f3";

                    html += `<td>
                        ${curr} / ${max} <br>(${percent}%)<br>
                        <div class='progress-bar'><div class='progress-inner' style='width:${percent}%; background:${barColor};'></div></div>
                        <small>ğŸ† ${achv}</small><br>
                        <button onclick='subtract(${i},${j})'>ï¼</button>
                        <button onclick='add(${i},${j})'>ï¼‹</button>
                        <button onclick='edit(${i},${j})'>âœ</button>
                    </td>`;
                }
                html += `</tr>`;
            }

            html += `</table>`;
            document.getElementById("output").innerHTML = html;
        }

        function add(i, j) {
            if (progress[i][j] < theoretical[i][j]) {
                progress[i][j]++;
                saveProgress();
                showList();
            } else {
                alert("ã™ã§ã«æœ€å¤§æ•°ã«åˆ°é”ã—ã¦ã„ã¾ã™");
            }
        }

        function subtract(i, j) {
            if (progress[i][j] > 0) {
                progress[i][j]--;
                saveProgress();
                showList();
            } else {
                alert("0æœªæº€ã«ã¯ã§ãã¾ã›ã‚“");
            }
        }

        function edit(i, j) {
            const max = theoretical[i][j];
            const input = prompt(`æ–°ã—ã„å€¤ã‚’å…¥åŠ› (æœ€å¤§ ${max})`, progress[i][j]);
            const val = parseInt(input);
            if (!isNaN(val) && val >= 0 && val <= max) {
                progress[i][j] = val;
                saveProgress();
                showList();
            } else {
                alert("æ­£ã—ã„æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
            }
        }

        showList();
    </script>
</body>

</html>